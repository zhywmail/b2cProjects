(function(b){var a=function(d){var c=this;c.ajaxType="post";c.args={};c.loadAfterEvent=undefined;if(d){c.bsV=d.bsV?d.bsV:"2";c.paginationId=d.paginationId?d.paginationId:undefined;c.data_container=d.data_container?d.data_container:undefined;c.pagination_container=d.pagination_container?d.pagination_container:undefined;c.pagination_params=d.pagination_params?d.pagination_params:undefined;c.ajaxUrl=d.ajaxUrl?d.ajaxUrl:undefined}c.init=function(){if(!c.pagination_params){throw"pagination_params is undefined"}var e=b(c.pagination_params);if(!e){throw"the div of pagination_params is not exist"}c.isDisplayHomePage=false;c.enableToPage=false;c.hideIfEmpty=false;c.hideTotal=false;c.recordType=e.attr("recordType");c.totalPages=parseInt(e.attr("totalPages"));c.currentPage=parseInt(e.attr("currentPage"));c.totalRecords=parseInt(e.attr("totalRecords"));c.displayNum=6;c.pageLimit=10;if(e.attr("displayNum")){c.displayNum=parseInt(e.attr("displayNum"))}if(e.attr("pageLimit")){c.pageLimit=parseInt(e.attr("pageLimit"))}if(e.attr("enableToPage")&&e.attr("enableToPage")=="true"){c.enableToPage=true}if(e.attr("hideIfEmpty")&&e.attr("hideIfEmpty")=="true"){c.hideIfEmpty=true}if(e.attr("hideTotal")&&e.attr("hideTotal")=="true"){c.hideTotal=true}};c.showPageHtml=function(){c.init();if(!c.pagination_container){throw"pagination_container is undefined"}var e=b(c.pagination_container);if(!e){throw"the div of pagination_container is not exist"}var l=b(c.data_container).attr("id");var m="javascript:void(0);";if(l){m="#"+l}var g="do_click";if(c.paginationId){g=c.paginationId+"_"+g}if(c.hideIfEmpty&&c.totalRecords==0){e.html("");return}var r="";if(c.bsV=="2"){r+="<ul>"}if(c.currentPage>1){if(c.isDisplayHomePage){r+="<li><a href='"+m+"' class='"+g+"' data-a='1'>首页</a></li>"}}if(c.currentPage>1){r+="<li><a href='"+m+"' class='"+g+"' data-a='"+(c.currentPage-1)+"'>上一页</a></li>"}else{r+="<li class='disabled'><a title='目前已是第一页'>上一页</a></li>"}if(c.bsV=="2"){r+="</ul>"}if(c.bsV=="2"){r+="&nbsp;<ul>"}if(c.displayNum==0){r+="<li class='active'><a>"+c.currentPage+"</a>/"+c.totalPages+"</li>"}else{var h=c.displayNum/2-1;var j=c.displayNum/2+1;var n=1;var p=1;if(c.currentPage<j){n=1}else{n=c.currentPage-h}if(c.currentPage+h>c.totalPages){p=c.totalPages}else{p=c.currentPage+h}if(c.currentPage+h<c.displayNum){p=c.displayNum}if(p-c.currentPage<h){n=c.totalPages-(c.displayNum-1);if(n!=1){n+=1}}if(n<=0){n=1}if(p>c.totalPages){p=c.totalPages}if(c.currentPage>=j&&n!=1){r+="<li><a href='"+m+"' class='"+g+"'>1</a></li>";if(c.currentPage!=j){r+="<li class='disabled'><a>...</a></li>"}}for(var k=n;k<=p;k++){var q="";if(k!=c.currentPage){q="<li><a href='"+m+"' class='"+g+"' data-a='"+k+"'>"+k+"</a></li>"}else{q="<li class='active'><a>"+k+"</a></li>"}r+=q}}if(c.bsV=="2"){r+="</ul>"}if(c.bsV=="2"){r+="&nbsp;<ul>"}if(c.currentPage<c.totalPages){r+="<li><a href='"+m+"' class='"+g+"' data-a='"+(c.currentPage+1)+"'>下一页</a></li>"}else{r+="<li class='disabled'><a title='目前已是最后一页'>下一页</a></li>"}if(c.bsV=="2"){r+="</ul>"}if(c.bsV=="2"){r+="&nbsp;<ul>"}if(c.enableToPage&&c.totalPages>c.displayNum){r+="<li class='disabled'><a>第</a></li>";r+="<li><input type='text' class='input toPage'></li>";r+="<li class='disabled'><a>页</a></li>";r+="<li><a href='"+m+"' class='toPage_submit'>确定</a></li>"}if(c.bsV=="2"){r+="</ul>"}if(!c.hideTotal){if(c.bsV=="2"){r+="&nbsp;<ul>"}if(c.totalRecords==0){r+="<li class='disabled'><a>共 "+c.totalRecords;if(c.recordType!=null&&c.recordType.length>0){r+=" 个"+c.recordType}r+="</a></li>"}else{var f=(c.currentPage-1)*c.pageLimit+1;var o;if(f+c.pageLimit>c.totalRecords){o=c.totalRecords}else{o=f+c.pageLimit-1}r+="<li class='disabled'><a>显示 "+f+" - "+o+" / 共 "+c.totalRecords;if(c.recordType!=null&&c.recordType.length>0){r+=" 个"+c.recordType}r+="</a></li>"}if(c.bsV=="2"){r+="</ul>"}}e.off("click",".toPage_submit",c.skipPage);e.on("click",".toPage_submit",c.skipPage);e.off("click","."+g,c.clickPage);e.on("click","."+g,c.clickPage);e.html("");e.append(r)};c.skipPage=function(){var f=b(".toPage",b(c.pagination_container));if(!f){alert("请输入要跳转到的页面!");return}var g=f.val();g=b.trim(g);if(g==""){alert("请输入要跳转到的页面!");return}var e=new RegExp("^[1-9][0-9]*$");if(!e.test(g)){alert("要跳转到的页面必须为非0的数字!");return}if(g>c.totalPages){alert("最大跳转页数为："+c.totalPages+"，请重新输入!");return}c.goPage(g)};c.clickPage=function(){var e=b(this).attr("data-a");c.goPage(e)};c.load=function(f){c.args=(f==null||f==undefined)?{}:f;var e={page:1};if(c.args){b.extend(e,c.args)}c.doAjax(e)};c.goPage=function(f){var e={page:f};b.extend(e,c.args);c.doAjax(e)};c.doAjax=function(e){if(!c.ajaxUrl){throw"ajaxUrl is undefined"}if(!c.data_container){throw"data_container is undefined"}b.ajax({url:c.ajaxUrl,type:c.ajaxType,data:e,dataType:"html",success:function(g){var f=b(c.data_container);f.html("");f.append(g);c.showPageHtml();if(c.loadAfterEvent){c.loadAfterEvent.fireEvent()}}})}};b.IsoneAjaxPagination=a})(window.jQuery);